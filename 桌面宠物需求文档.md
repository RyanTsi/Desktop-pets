桌面宠物——海风
==

[TOC]

# 1. 摘要

## 1.1 设计初衷

​	性能较为优秀，界面美观，操作逻辑简单，兼娱乐与效率于一体的，让多数人乐意使用的桌面宠物。

## 1.2 设计背景

​	桌宠是一种虚拟宠物，可以生活在用户的电脑桌面上，提供娱乐和互动体验。在早期计算机时代非常流行，但后来逐渐减少了关注度。然而，随着人们对虚拟现实、增强现实和人工智能的兴趣增加，桌宠可能会再次引起注意。	

​	我们这一代人（2000年前后出生）曾遇到过这么一款风靡全球的的喂养游戏——QQ宠物，然而自从2018年QQ宠物停运以来，市面上就罕有能与之媲美的同类产品的出现。因此我们希望对这一类的桌面宠物进行调整与改进，进而衍生出更加符合现代人审美与需求的的版本。

​	本产品着力于在尽可能少地占用电脑资源的同时，兼顾娱乐与效率，娱乐方面主要是与桌面宠物的互动，诸如喂食、摸头等行为，效率方面主要是一些提醒，诸如计时器、久坐提醒等等。

# 2. 技术规范

## 2.1 开发环境

 开发环境|版本
:-----: | :----:
C++ | C++ 17 
QT | 5.12      
CLion, VS code |
Live2D Cubism Editor |

git地址：https://github.com/RyanTsi/Desktop-pets.git

# 3. 美术元素设计

## 3.1 主题

海风

## 3.2 配色

主题色：白、蓝

副色：青、粉、黄

## 3.3 logo

待定

## 3.4 人物

待定

## 3.5 动作

喂食/吃药

触摸（脑袋，身体，脚）

端坐

趴

抓起拖动

提醒

睡觉

# 4. 成长系统

## 4.1 好感度系统

> 主要的养成奖励。

通过喂食、触摸等动作获得好感度，当好感度达到一定值的时候，解锁新的动作和表情。

好感度分为 7 个阶段（Lv0，Lv1，Lv2，Lv3，Lv4，Lv5，Lv6）

各个阶段所需要的好感度（预计 40 天左右达到 Lv6，$Lv_i = 8e^i$）：

Lv0：0 exp

Lv1：22 exp	

Lv2：59 exp

Lv3：161 exp

Lv4：437 exp

Lv5：1187 exp

Lv6：3227 exp

每次触摸获得 1~3 好感，无上限, 间隔 3 s。

每次喂食活动 8~20 好感，每天上限 6 次，间隔 1 h。

存在 2% 概率得到双倍好感度。

## 4.2 心情系统

> 直接影响好感度获取增益, 正向心情增加好感度获取，负向心情减少好感度获取。

正常 +0%

欣喜若狂 +50%

开心 +20%

冷漠 -20%

伤心、生气  -50%

内置隐藏心情数值，值域 $[-100, 100]$。

$[-100, -70)$ -50%

$[-70, -30)$ -20%

$[-30, 30]$ 0%

$(30, 70]$ 20%

$(70, 100]$ 50%

心情衰减系数 0.98：每分钟的心情值是上一分钟的 0.98。

## 4.3 健康系统

> 与效率功能挂钩，用于敦促用户工作学习，提醒用户休息。影响心情。

**健康状态**

1. 健康

2. 生病

通过检测当地的天气状况，以及宠物今天的精力状况，气温越低，雨雪天气，精力越低更容易生病。

生病概率 $p = \frac{min(30, |Temp - 21|) \times max(0, 40 - Enrg)}{3600}$，其中 $Temp$ 为温度，$Enrg$ 为精力。

在生病状态下，好感度获取降低。

吃药，以及睡觉状态下能够加快身体状况的好转。

基础生病好转的时间为 40 min。

吃药：剩余好转需要的时间减少 50 %，每次生病只能吃一次药。

睡觉：好转速度提高 100 %。

生病状态下心情上限修改为 69，且心情 $-1 / min$。

一天只能生病一次。

**精力条**

值域 $[0, 100]$。

睡觉状态下持续恢复精力，专注模式下持续消耗精力、提高心情，其他状态下持续消耗精力。

睡觉状态：精力 $+5 / min$

专注模式：精力 $-1 / 2 min$、心情 $+1 / 2 min$

其他状态：精力 $-1 / 5 min$

所有状态：精力小于 15，心情 $-1 / min$，精力小于 5， 心情 $-5 / min$

# 5. 功能设计

## 5.1 目光追踪

在端坐动作下，人物的目光始终跟随鼠标。

## 5.2 键盘可视化

在趴动作下，实现全键盘的监控并显示出来。

## 5.3 久坐提醒

在电脑长期活动状态下，达到预设时间后进行提醒，默认为 2 小时，可在设置中进行修改。

## 5.4 屏保

设置中开关启动，默认开启，电脑长时间未进行活动时，默认40min，人物在屏幕上随机游走。

## 5.5 专注模式

手动开始专注模式，设置固定时间，人物进入键盘可视化，同时减少系统通知消息，计时结束后提醒进行合理的休息。

## 5.6 天气预报

每次启动/每天的第一次触摸会播报当地的今日气温以及降雨/雪，并给出合理的外出建议。

当地的位置信息在设置中进行调整，默认中国杭州。

# 6. 操作逻辑

## 6.1 人物及小图标

左键单击人物——触摸

左键长按人物——抓起拖动

右键单击人物——选项列表（投喂（蛋糕、药，……），计时器（15min，30min， 60min， 自定义），动作调整（正常，端坐，趴），调出音乐可视化界面）

右键单击系统托盘小图标——选项列表（设置，退出）

## 6.2 控制面板

1. 人物预览（表情，动作，……）

2. 好感度界面，称呼设置

3. 心情界面

4. 健康界面

5. 设置：开机自启动、屏保、位置信息

**主要是一些数据的统计**



